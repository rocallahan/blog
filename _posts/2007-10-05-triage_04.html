---
layout: "post"
title: "Triage"
date: "2007-10-04 14:03:00 +0000"
categories: "Mozilla"
permalink: "/2007/10/triage_04.html"
---
<div class="columns"><p>David Baron and I tried a new approach to layout triage, using a <a href="https://docs.google.com/?tab=mo&pli=1">Google Docs</a> spreadsheet to record our decisions collaboratively. I added some automation steps so the overall workflow goes like this:<br/><ul><br/><li>Use the <a href="https://bugzilla.mozilla.org/buglist.cgi?cmdtype=dorem&remaction=run&namedcmd=1.9%3F%20-%20Layout&sharer_id=96908">Bugzilla query</a> to locate bugs which have been requested as 1.9 blockers.<br/><li>Download the query results in <a href="https://bugzilla.mozilla.org/buglist.cgi?bug_status=UNCONFIRMED&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&chfieldto=Now&component=Editor&component=Layout&component=Layout%3A%20BiDi%20Hebrew%20%26%20Arabic&component=Layout%3A%20Block%20and%20Inline&component=Layout%3A%20CTL&component=Layout%3A%20Floats&component=Layout%3A%20Fonts%20and%20Text&component=Layout%3A%20Form%20Controls&component=Layout%3A%20HTML%20Frames&component=Layout%3A%20Images&component=Layout%3A%20Misc%20Code&component=Layout%3A%20R%20%26%20A%20Pos&component=Layout%3A%20Tables&component=Layout%3A%20View%20Rendering&component=MathML&component=Selection&component=Style%20System%20%28CSS%29&component=XP%20Toolkit%2FWidgets&component=XP%20Toolkit%2FWidgets%3A%20Menus&component=XP%20Toolkit%2FWidgets%3A%20Trees&component=XP%20Toolkit%2FWidgets%3A%20XUL&field-1-0-0=bug_status&field-1-1-0=component&field-1-2-0=product&field0-0-0=flagtypes.name&known_name=1.9a1%2B&product=Core&query_format=advanced&type-1-0-0=anyexact&type-1-1-0=anyexact&type-1-2-0=anyexact&type0-0-0=equals&value-1-0-0=UNCONFIRMED%2CNEW%2CASSIGNED%2CREOPENED&value-1-1-0=Editor%2CLayout%2CLayout%3A%20BiDi%20Hebrew%20%26%20Arabic%2CLayout%3A%20Block%20and%20Inline%2CLayout%3A%20CTL%2CLayout%3A%20Floats%2CLayout%3A%20Fonts%20and%20Text%2CLayout%3A%20Form%20Controls%2CLayout%3A%20HTML%20Frames%2CLayout%3A%20Images%2CLayout%3A%20Misc%20Code%2CLayout%3A%20R%20%26%20A%20Pos%2CLayout%3A%20Tables%2CLayout%3A%20View%20Rendering%2CMathML%2CSelection%2CStyle%20System%20%28CSS%29%2CXP%20Toolkit%2FWidgets%2CXP%20Toolkit%2FWidgets%3A%20Menus%2CXP%20Toolkit%2FWidgets%3A%20Trees%2CXP%20Toolkit%2FWidgets%3A%20XUL&value-1-2-0=Core&value0-0-0=blocking1.9%3F&ctype=csv">CSV format</a>.<br/><li>Use a trivial Perl script to trim off columns I don't want and add a new column which is the Bugzilla URI for each bug.<br/><li>Import the CSV into a new <a href="http://spreadsheets.google.com/pub?key=p83WsqADimjsgP59WZBiWYQ">Google Docs spreadsheet</a>.<br/><li>Add columns in which David and I can each write our evaluations.<br/><li>Invite David and Damon as collaborators.<br/><li>David and I read the bugs (with the help of the URIs, which Google Docs makes clickable) and add evaluations to the spreadsheet (the Real Work).<br/><li>Discuss any differing evaluations until we converge on a decision. Mark decisions by bolding the evaluation we settle on.<br/><li>Export the spreadsheet to HTML and save it locally.<br/><li>Run another Perl script to identify the bolded decision for each bug and generate a <a href="http://services.alphaworks.ibm.com/coscripter/browse/extension">Coscripter</a> script to update all the Bugzilla bugs!<br/><li>Run the Coscripter script.<br/><li>Go to lunch.<br/><li>Return from lunch, discover that my laptop went to sleep while running the script, and restart it from the last not-updated bug.<br/></ul><br/><p>I'm not sure whether this saved much time, in the end, compared to just exchanging comments via email and marking bugs manually, but it was a lot more fun! (And marking bugs manually is very very tedious, at least when you're on a different continent to Bugzilla.)<br/><p><strong>Also</strong>, during this exercise I played around with Google Docs a little bit and discovered that their charting tools use SVG! Excellent!</div><br/><p>Here's the Coscripter-generation-script, by the way:<br/><pre>#!/usr/bin/perl -w<br/>sub resolve {<br/>my ($bug, $resolution) = @_;<br/>if ($resolution eq "blocking") {<br/>print "* go to \"$bug\"<br/>* select \"+\" from the \"blocking1.9\"'s \"blocking1.9\" listbox<br/>* click the \"Commit\" button\n";<br/>} elsif ($resolution eq "wanted") {<br/>print "* go to \"$bug\"<br/>* select \"-\" from the \"blocking1.9\"'s \"blocking1.9\" listbox<br/>* enter \"[wanted-1.9]\" into the \"W\" textbox<br/>* click the \"Commit\" button\n";<br/>} elsif ($resolution eq "minus") {<br/>print "* go to \"$bug\"<br/>* select \"-\" from the \"blocking1.9\"'s \"blocking1.9\" listbox<br/>* click the \"Commit\" button\n";<br/>}<br/>}<br/>my $bug;<br/>while (&lt;&gt;) {<br/>foreach my $cell (split(/&lt;td/)) {<br/>if ($cell =~ m!(http://.*)!) {<br/>$bug = $1;<br/>}<br/>if ($cell =~ m!class='g s4'&gt;(\w+)!) {<br/>&resolve($bug, $1);<br/>}<br/>}<br/>}</pre><br/><br/>
<div class='comments'><h2>Comments</h2>
<div class='comment'>
<div class='author'>James Napolitano</div>
<div class='content'>&gt;OK, so what would Bugzilla need in order to make this process work more smoothly in the system than out of it?<br>It sounds like it needs the ability to add a column of editable text fields (for the evaluations) to a bug list/saved search.  You&#39;d also need a column of checkboxes to select which bugs you&#39;d want to update.  The ability to view or just edit the list would have to be restricted to a certain group, like drivers, but I think Bugzilla can already do that.  There&#39;s no need to add the bug URIs because you already have links to the bugs right there. (you could force it to display the bug URLs anyway by adding some CSS to the bug links, i.e. a:after {content: attr(href); } )<br>Since Mozilla uses Bugzilla so extensively but has to resort to using external tools alongside it, maybe the MoFo should provide a grant to Bugzilla or EverythingSolved to add in the features it needs.  It could almost pay for itself in saved time.<br></div>
</div>
<div class='comment'>
<div class='author'>kurt</div>
<div class='content'>Db, I have the same problem with the spreadsheets and I just learned to hit enter to allow me to edit the text.  It needs to be more mouse friendly and let me edit more stuff with charts like colors and scales and not select like a1:d20 but be able to select multiple cells like a5:d5;a4:d30 and then pick which column or row is the label.  Its still beta though...<br></div>
</div>
<div class='comment'>
<div class='author'>Gerv</div>
<div class='content'>There is a bug on editable buglists - https://bugzilla.mozilla.org/show_bug.cgi?id=246272.<br>Gerv<br></div>
</div>
<div class='comment'>
<div class='author'>David Baron</div>
<div class='content'>The thing that annoyed me most during this exercise was actually the basic spreadsheet UI in google docs.  If I had a cell selected already, I wanted a single click inside that cell to give me a caret inside the text already in the cell.  However, that wouldn&#39;t give me a caret to edit the text already there, and if I typed, I&#39;d replace the text.<br>Shaver pointed out to me that if I double-clicked in the cell (whether or not I&#39;d already selected it), I&#39;d get what I wanted.   But I couldn&#39;t get that into muscle memory even after a bunch of tries.<br></div>
</div>
<div class='comment'>
<div class='author'>Robert O'Callahan</div>
<div class='content'>Yes, some way to to bulk changes efficiently would be useful. What James suggests about adding editable fields to a query results page would be useful. Another interesting option would be to support uploading of changed bug data in CSV format.<br></div>
</div>
<div class='comment'>
<div class='author'>Gerv</div>
<div class='content'>OK, so what would Bugzilla need in order to make this process work more smoothly in the system than out of it?<br>Let&#39;s start with one it does do - you can choose the columns you want on your query using URL parameters and/or setting a cookie, although I&#39;m not completely certain there are docs for it. But you can&#39;t ask for the URL to be one of the columns; that should certainly be an option.<br>Gerv<br></div>
</div>

</div>